# EMOTION DETECTION USING GMMHMMs
=================================

### Dependencies:
+ [voiceid](https://code.google.com/p/voiceid/downloads/list): Python wrapper for LIUM diarization. The by-product of diarization is a set of segmented wav files which are used to create (by hand) the training dataset from continuous audio.

+ [hmmlearn](https://github.com/hmmlearn/hmmlearn): A toolkit from which we use the GMMHMM class to build HMMs for each emotion that needs to be classified.

+ [Python Speech Features](https://github.com/jameslyons/python_speech_features): Python module that allows the extraction of various features from audio. OpenEMO uses it to extract MFCCs.

+ **Numpy**: GMMHMM uses numpy arrays as input for the training procedure.

+ **Scipy**: Specifically scipy.io.wavfile to read wav files.

---
### Description of the python files:
+ **segment.py**: This script runs the voiceid diarization and generates a directory for the wav file with various subdirectories, each containing speech segments of a particular speaker or of particular sounds.

+ **findingemo.py**: The emotion detection module. Can be run in two modes (train + test / test).

---
## Usage:
- Download the git repo.

```shell
git clone https://github.com/openEMO/ResAndDev.git
```

- Run the segment.py script with the complete wav file

```shell
python segment.py _<wavfile>_
```

- Create a folder called "training" and create folders within with names of emotions like "Anger", "Happiness", "Sarcasm" and so on.

- Find the folder containing segmented wav files generated by segment.py and manually copy files into relevant emotion folders in training. For a trial, you may use the training set at [this link](https://drive.google.com/folderview?id=0BwOspa2K7TtLfkRzV0NlRmpwU2NGM3huSE1ITTNWeFliYnpFSERxWk1wSjJWNGt5R2VHNWs&usp=sharing).

- Run the emotion trainer and classifier.

```python
python findingemo.py
```

- Provide relevant options. Remember to train atleast once before testing. For testing, use only a segment of the wav file over which you want to predict emotion. Typically, this too is obtained by diarization.

#### NOTE: the pickle files are a result of training. You may run the test procedure with test wav files without training provided the .pkl files are in the same path as findingemo.py
